# Changelog

Все значительные изменения в Starvell Cardinal будут документироваться в этом файле.

## [0.0.16] - 2026-01-08

### Добавлено

- **Настройка автоответов (кастомные команды)**: Новое меню для создания пользовательских команд с префиксами
  - Добавление/редактирование/удаление команд через бота
  - Настраиваемый префикс команд (!, /, . и т.д.)
  - Пагинация списка команд (по 5 на страницу)
  - Глобальный переключатель включения/выключения
  - Автоматическая обработка команд в чатах покупателей
  - Хранение команд в JSON файле `storage/custom_commands.json`
- **Кнопка "Настройка автоответов"**: Добавлена в главное меню между "Настройки уведомлений" и "Автовыдача"

### Улучшено

- **Переключатели автоответов**: Исправлен баг перехода в "Глобальные переключатели"
  - Кнопки вкл/выкл ответов на заказ теперь остаются в своём меню
  - Кнопки вкл/выкл ответов на отзыв теперь остаются в своём меню
  - Улучшена навигация и UX

### Удалено

- **install-sc.sh**: Удалён ненужный скрипт установки

### Технические изменения

- Добавлен новый модуль `bot/handlers/custom_commands_handlers.py`
- Добавлена функция `get_custom_commands_menu()` в keyboards
- Добавлена обработка кастомных команд в `bot/features/tasks.py`
- Обновлены типы callback кнопок в `CBT` класс

---

## [0.0.15] - 2026-01-07

### Добавлено

- **Инициализация автоответов при запуске**: При включении автоответов на подтверждение заказа или отзывы все существующие заказы загружаются как уже обработанные
- **Предотвращение спама старыми заказами**: Автоответы теперь отправляются только на новые заказы после включения функции
- **Детальное меню плагинов**: Добавлено отображение количества активных и отключенных плагинов
- **Напоминания про перезапуск**: После действий с плагинами показывается кликабельная команда `/restart`

### Улучшено

- **Автоответы**: Теперь при включении функции автоматически инициализируются все текущие заказы как обработанные
- **Меню плагинов**: Одинаковое детальное отображение при первом входе и при возврате из подменю
- **Логирование автоответов**: Показывается количество загруженных завершенных заказов и отзывов при инициализации
- **Сообщение после загрузки плагина**: Добавлена команда `/restart` для удобства

### Исправлено

- **Массовая отправка автоответов**: Исправлена проблема, когда при включении автоответов бот отправлял сообщения на все старые заказы
- **Дублирование автоответов**: Устранено повторное срабатывание автоответов каждые 5 минут на одни и те же заказы
- **Отображение меню плагинов**: Исправлена несогласованность отображения при первом входе и при возврате назад

---
